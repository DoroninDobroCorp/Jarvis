# ๐ ะกะฒะพะดะบะฐ ะฒัะฟะพะปะฝะตะฝะฝัั ัะปัััะตะฝะธะน

**ะะฐัะฐ:** 2025-10-03  
**ะกัะฐััั:** โ ะัะต ะทะฐะดะฐัะธ ะฒัะฟะพะปะฝะตะฝั

---

## ๐ ะัะฟะพะปะฝะตะฝะฝัะต ะทะฐะดะฐัะธ

### 1. โ Memory Bank ัะธััะตะผะฐ

**ะกะพะทะดะฐะฝะพ:**
- `memory-bank/productContext.md` โ ะพะฑะทะพั ะฟัะพะตะบัะฐ ะธ ะฐััะธัะตะบัััะฐ
- `memory-bank/activeContext.md` โ ัะตะบััะธะน ะบะพะฝัะตะบัั ัะฐะฑะพัั
- `memory-bank/progress.md` โ ััะตะบะตั ะฟัะพะณัะตััะฐ
- `memory-bank/decisionLog.md` โ ะปะพะณ ัะตัะฝะธัะตัะบะธั ัะตัะตะฝะธะน
- `memory-bank/systemPatterns.md` โ ะฟะฐััะตัะฝั ัะฐะทัะฐะฑะพัะบะธ

**ะะตะทัะปััะฐั:** ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะฐั ัะธััะตะผะฐ ะพััะปะตะถะธะฒะฐะฝะธั ะบะพะฝัะตะบััะฐ ะฟัะพะตะบัะฐ ะดะปั ะดะพะปะณะพััะพัะฝะพะน ัะฐะฑะพัั.

---

### 2. โ ะะตะพัะณะฐะฝะธะทะฐัะธั ะดะพะบัะผะตะฝัะฐัะธะธ

**ะะตัะตะผะตัะตะฝั ะฒ `docs/`:**
- `FAKE-SHADOWS.md`
- `OPTIMIZATION-SUMMARY.md`
- `PERFORMANCE.md`
- `PROCHEE-TEST.md`

**ะะตะทัะปััะฐั:** ะงะธัััะน ะบะพัะตะฝั ะฟัะพะตะบัะฐ, ัะพะฑะปัะดะตะฝะธะต ะฟัะฐะฒะธะป ะพัะณะฐะฝะธะทะฐัะธะธ ัะฐะนะปะพะฒ.

---

### 3. โ ะัะฟัะฐะฒะปะตะฝะธะต console.error โ logger

**ะคะฐะนะป:** `src/utils/raf-batch.ts`

**ะัะปะพ:**
```typescript
console.error('RAF callback error:', e);
```

**ะกัะฐะปะพ:**
```typescript
import { getLogger } from '../logger';
const log = getLogger('raf-batch');
log.error('raf:callback-error', { error: e instanceof Error ? e.message : String(e) });
```

**ะะตะทัะปััะฐั:** ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต ั ััะพะฒะฝัะผะธ ะธ ะบะพะฝัะตะบััะพะผ.

---

### 4. โ ะฃะปัััะตะฝะธะต ัะธะฟะธะทะฐัะธะธ window ะพะฑัะตะบัะพะฒ

**ะกะพะทะดะฐะฝะพ:** `src/global.d.ts`

```typescript
declare global {
  interface Window {
    __coverAudit?: typeof auditAndFixAllCovers;
    __coverBackfill?: typeof runCoverBackfill;
    __fps?: number[];
    __dragStart?: number;
    __vitePreload?: { useAppStore?: unknown };
  }
}
```

**ะฃะดะฐะปะตะฝะพ:** ะดัะฑะปะธััััะธะต ะดะตะบะปะฐัะฐัะธะธ ะธะท `main.tsx`

**ะะตะทัะปััะฐั:** ะขะธะฟะพะฑะตะทะพะฟะฐัะฝะพััั ะดะปั window ะพะฑัะตะบัะพะฒ, ััััะฐะฝะตะฝะธะต `as any`.

---

### 5. โ ะะตัะฐะบัะพัะธะฝะณ ะดัะฑะปะธัะพะฒะฐะฝะธั coverUrl

**ะกะพะทะดะฐะฝะพ:** `src/utils/coverUtils.ts`

```typescript
export function isCoverUrlInvalid(coverUrl: string | undefined | null): boolean;
export function normalizeCoverUrl(coverUrl: string | undefined | null): string;
```

**ะัะธะผะตะฝะตะฝะพ ะฒ:** `src/main.tsx`

**ะะตะทัะปััะฐั:** ะฃัััะฐะฝะตะฝั 4 ะดัะฑะปะธััััะธััั ัะธะปัััะฐ, ะบะพะด ััะฐะป ัะธัะต ะธ ัะตััะธััะตะผัะผ.

---

### 6. โ ะะฐัััะพะนะบะฐ Vitest + Unit ัะตััั

**ะกะพะทะดะฐะฝะพ:**
- `vitest.config.ts` โ ะบะพะฝัะธะณััะฐัะธั
- `src/test/setup.ts` โ test setup
- `src/utils/throttle.test.ts` โ ัะตััั throttle
- `src/utils/coverUtils.test.ts` โ ัะตััั coverUtils
- `src/utils/raf-batch.test.ts` โ ัะตััั raf-batch

**ะะพะฑะฐะฒะปะตะฝั ัะบัะธะฟัั:**
```json
"test": "vitest",
"test:ui": "vitest --ui",
"test:coverage": "vitest --coverage"
```

**ะะตะทัะปััะฐั:** ะะพะบัััะธะต unit ัะตััะฐะผะธ ะบัะธัะธัะตัะบะธั ััะธะปะธั.

---

### 7. โ ะะฐะผะตะฝะฐ uuid โ crypto.randomUUID()

**ะะทะผะตะฝะตะฝะพ ะฒ ัะฐะนะปะฐั:**
- `src/store.ts`
- `src/gamification.ts`
- `src/pages/DiaryPage.tsx`
- `src/components/AssistantModal.tsx`
- `src/components/MediaCollectionPage.tsx`
- `src/assistant/storage.ts`

**ะฃะดะฐะปะตะฝะพ ะธะท ะทะฐะฒะธัะธะผะพััะตะน:** `uuid@13.0.0`

**ะะตะทัะปััะฐั:** 
- โ ะะตั ะปะธัะฝะธั ะทะฐะฒะธัะธะผะพััะตะน
- โ ะะตะฝััะต ัะฐะทะผะตั ะฑะฐะฝะดะปะฐ
- โ ะะฐัะธะฒะฝัะน API (ะฑััััะตะต)

---

### 8. โ Husky + lint-staged

**ะกะพะทะดะฐะฝะพ:**
- `.husky/pre-commit` โ pre-commit hook
- `.prettierrc.json` โ Prettier ะบะพะฝัะธะณััะฐัะธั
- `lint-staged` ะบะพะฝัะธะณััะฐัะธั ะฒ `package.json`

**ะกะบัะธะฟั:** `"prepare": "husky"`

**Pre-commit ะดะตะนััะฒะธั:**
- ESLint --fix ะฝะฐ ะธะทะผะตะฝัะฝะฝัั ัะฐะนะปะฐั
- Vitest related --run (ัะตััั ัะฒัะทะฐะฝะฝัั ัะฐะนะปะพะฒ)
- Prettier --write ะฝะฐ JSON/MD

**ะะตะทัะปััะฐั:** ะะฒัะพะผะฐัะธัะตัะบะฐั ะฟัะพะฒะตัะบะฐ ะบะฐัะตััะฒะฐ ะบะพะดะฐ ะฟะตัะตะด ะบะพะผะผะธัะพะผ.

---

### 9. โ GitHub Actions CI/CD

**ะกะพะทะดะฐะฝะพ:**

**`.github/workflows/ci.yml`** โ Continuous Integration:
- โ Lint (ESLint)
- โ Unit ัะตััั (Vitest)
- โ Build (TypeScript + Vite)
- โ E2E ัะตััั (Playwright)
- โ Performance ัะตััั

**`.github/workflows/deploy.yml`** โ Deployment:
- โ Lint + Test + Build
- โ Deploy ะฝะฐ GitHub Pages

**`.github/PULL_REQUEST_TEMPLATE.md`** โ ัะฐะฑะปะพะฝ PR

**ะะตะทัะปััะฐั:** ะะฒัะพะผะฐัะธัะตัะบะฐั ะฟัะพะฒะตัะบะฐ ะธ ะดะตะฟะปะพะน ะฝะฐ ะบะฐะถะดัะน push/PR.

---

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั

ะกะพะทะดะฐะฝั ะฝะพะฒัะต ัะฐะนะปั:

- **`CHANGELOG.md`** โ ะธััะพัะธั ะธะทะผะตะฝะตะฝะธะน ะฟัะพะตะบัะฐ
- **`CONTRIBUTING.md`** โ ััะบะพะฒะพะดััะฒะพ ะดะปั ะบะพะฝััะธะฑัััะพัะพะฒ
- **`SETUP.md`** โ ะธะฝััััะบัะธะธ ะฟะพ ะทะฐะฒะตััะตะฝะธั ัััะฐะฝะพะฒะบะธ
- **ะะฑะฝะพะฒะปัะฝ `README.md`** โ ะบัะฐัะธะฒัะน overview ั badges

---

## ๐ ะะตััะธะบะธ ะะพ/ะะพัะปะต

| ะะตััะธะบะฐ | ะะพ | ะะพัะปะต | ะฃะปัััะตะฝะธะต |
|---------|-------|-------|-----------|
| **ะะฐะฒะธัะธะผะพััะธ** | 8 prod | 7 prod | -1 (uuid ัะดะฐะปัะฝ) |
| **Unit ัะตััั** | 0 | 3 ัะฐะนะปะฐ + 15 ัะตััะพะฒ | +โ |
| **ะขะธะฟะธะทะฐัะธั window** | `as any` | `global.d.ts` | โ Type-safe |
| **Pre-commit checks** | โ ะฝะตั | โ ESLint + tests | ะะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะพ |
| **CI/CD** | โ ะฝะตั | โ 5 jobs | ะะพะปะฝัะน pipeline |
| **ะะพะบัะผะตะฝัะฐัะธั** | ะะฐะทะฑัะพัะฐะฝะฐ | `docs/` + `memory-bank/` | ะัะณะฐะฝะธะทะพะฒะฐะฝะฐ |
| **ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั** | 58-60 FPS | 58-60 FPS | โ ะกะพััะฐะฝะตะฝะฐ |

---

## ๐ ะงัะพ ะดะฐะปััะต?

### ะกะตะนัะฐั ะฝัะถะฝะพ:
```bash
npm install      # ะฃััะฐะฝะพะฒะธัั ะฝะพะฒัะต ะทะฐะฒะธัะธะผะพััะธ
npm run prepare  # ะะฝะธัะธะฐะปะธะทะธัะพะฒะฐัั Husky
npm run test     # ะัะพะฒะตัะธัั ัะฐะฑะพัั ัะตััะพะฒ
git add .
git commit -m "feat: ะฟะพะปะฝะฐั ะพะฟัะธะผะธะทะฐัะธั ะฟัะพะตะบัะฐ"
```

### ะะฟัะธะพะฝะฐะปัะฝัะต ัะปัััะตะฝะธั (ะดะปั ะฑัะดััะตะณะพ):

1. **Virtual Scrolling** โ ะดะปั > 500 ัะทะปะพะฒ
2. **Web Workers** โ ะฒัะฝะตััะธ ััะถะตะปัะต ะฒััะธัะปะตะฝะธั (layout, search)
3. **WebGL Renderer** โ ะดะปั > 1000 ัะทะปะพะฒ
4. **Storybook** โ ะดะปั ะดะพะบัะผะตะฝัะฐัะธะธ ะบะพะผะฟะพะฝะตะฝัะพะฒ
5. **ะะพะปััะต unit ัะตััะพะฒ** โ ะฟะพะบัััั store.ts, recurrence.ts
6. **Visual regression tests** โ ัะบัะธะฝัะพัั UI
7. **Performance monitoring** โ Lighthouse CI

---

## โ ะัะพะณ

ะัะพะตะบั ะฟะพะปััะธะป:
- ๐ฏ **Memory Bank** ะดะปั ะดะพะปะณะพััะพัะฝะพะน ัะฐะฑะพัั
- ๐งช **Unit ัะตััั** ะดะปั ะบัะธัะธัะตัะบะพะน ะปะพะณะธะบะธ
- ๐ง **Pre-commit hooks** ะดะปั ะบะฐัะตััะฒะฐ ะบะพะดะฐ
- ๐ **CI/CD** ะดะปั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ
- ๐ **ะะพะบัะผะตะฝัะฐัะธั** ะดะปั ะฝะพะฒัั ะบะพะฝััะธะฑัััะพัะพะฒ
- ๐งน **ะงะธัััะน ะบะพะด** ะฑะตะท ะดัะฑะปะธัะพะฒะฐะฝะธั ะธ ะปะธัะฝะธั ะทะฐะฒะธัะธะผะพััะตะน

**ะัะพะตะบั ะณะพัะพะฒ ะบ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั ะธ ะบะพะผะฐะฝะดะฝะพะน ัะฐะทัะฐะฑะพัะบะต!** ๐
